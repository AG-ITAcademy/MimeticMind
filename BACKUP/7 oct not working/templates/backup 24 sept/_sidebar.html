<div class="sidebar">
    <!-- User Section -->
    <div class="menu-section">
        <div class="menu-header" onclick="toggleMenu('userMenu')">
            <i class="user-icon"></i> 
            {{ current_user.email }}
            <i class="dropdown-arrow"></i>
        </div>
        <ul class="menu-options collapse" id="userMenu">
            <li><a href="#">ACCOUNT DETAILS</a></li>
            <li><a href="#">BILLING INFORMATION</a></li>
            <li class="sign-out"><a href="{{ url_for('logout') }}">SIGN OUT</a></li>
        </ul>
    </div>

    <!-- Dashboard Section -->
    <div class="menu-section">
        <div class="menu-header">
            <i class="home-icon"></i>
            <a href="{{ url_for('dashboard') }}">DASHBOARD</a>
        </div>
    </div>

    <!-- Projects Section -->
    <div class="menu-section">
        <div class="menu-header" onclick="toggleMenu('projectsMenu')">
            <i class="briefcase-icon"></i> PROJECTS
        </div>
        <ul class="menu-options collapse" id="projectsMenu">
            {% for project in projects %}
                <li><a href="{{ url_for('projects_bp.project_dashboard', project_id=project.id) }}">{{ project.name }}</a></li>
            {% else %}
                <li>No projects available</li>
            {% endfor %}
            <li><a href="{{ url_for('projects_bp.create_project') }}">+ CREATE NEW PROJECT ...</a></li>
        </ul>
    </div>

    <!-- Notifications Section -->
    <div class="menu-section">
        <div class="menu-header">
            <i class="bell-icon"></i>
            <a href="{{ url_for('notifications') }}">NOTIFICATIONS</a>
        </div>
    </div>

    <!-- Settings Section -->
    <div class="menu-section">
        <div class="menu-header">
            <i class="cog-icon"></i>
            <a href="{{ url_for('settings') }}">SETTINGS</a>
        </div>
    </div>

    <!-- Credits Section -->
    <div class="credits-section">
        <p>15 Credits remaining...</p>
        <button class="upgrade-btn"><i class="cart-icon"></i> UPGRADE PLAN</button>
    </div>
</div>

<script>
// Toggle function for menu visibility
function toggleMenu(menuId) {
    var element = document.getElementById(menuId);
    if (element.style.display === "block") {
        element.style.display = "none";
    } else {
        element.style.display = "block";
    }
}

// Collapse all menus on page load
window.onload = function() {
    var menus = document.getElementsByClassName('menu-options');
    for (var i = 0; i < menus.length; i++) {
        menus[i].style.display = "none"; // Ensure all menus are collapsed initially
    }
};
</script>
